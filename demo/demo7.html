<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>findContours</title>
</head>
<body>
<img id="input1" src="../img/page-1.png" alt="">
<canvas id="output1" width="750" height="1334"></canvas>
<script src="../lib/opencv.js" type="text/javascript"></script>
<script>
    window.onload = function(){
        var $img1 = document.querySelector('#input1');
        var src1 = cv.imread($img1);
        var dst1 = getContours(src1);
        var $cvs1 = document.querySelector('#output1');
        cv.imshow($cvs1, dst1);

        //绘制边框
        function getContours(src){
            let dst = cv.Mat.zeros(src.rows, src.cols, cv.CV_8UC3);
            cv.cvtColor(src, src, cv.COLOR_RGBA2GRAY, 0);
            cv.threshold(src, src, 180, 200, cv.THRESH_BINARY);
            let contours = new cv.MatVector();
            let hierarchy = new cv.Mat();
            cv.findContours(src, contours, hierarchy, cv.RETR_CCOMP, cv.CHAIN_APPROX_SIMPLE);
            for (let i = 0; i < contours.size(); ++i) {
                let color = new cv.Scalar(255, 255,255);
                cv.drawContours(dst, contours, i, color, 1, cv.LINE_8, hierarchy, 100);
            }
            return dst;
        }
    }
</script>
</body>
</html>